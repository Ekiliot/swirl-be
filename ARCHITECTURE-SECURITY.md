# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ Chatroulette Backend

## ğŸ”„ **Ğ¡Ñ…ĞµĞ¼Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/WebSocket    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SQL Queries    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ĞšĞ»Ğ¸ĞµĞ½Ñ‚    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   Ğ‘ĞµĞºĞµĞ½Ğ´    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â”‚
â”‚ (Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€)   â”‚                      â”‚   (Go API)  â”‚                  â”‚ (PostgreSQL)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âŒ **ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ (Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SQL Queries    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ĞšĞ»Ğ¸ĞµĞ½Ñ‚    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â”‚
â”‚ (Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€)   â”‚                  â”‚ (PostgreSQL)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… **ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ (Ñ‡ĞµÑ€ĞµĞ· Ğ±ĞµĞºĞµĞ½Ğ´):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP/WebSocket    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    SQL Queries    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ĞšĞ»Ğ¸ĞµĞ½Ñ‚    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   Ğ‘ĞµĞºĞµĞ½Ğ´    â”‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â”‚
â”‚ (Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€)   â”‚                      â”‚   (Go API)  â”‚                  â”‚ (PostgreSQL)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ **ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**

### **1. Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸:**
```go
// JWT Ñ‚Ğ¾ĞºĞµĞ½ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
func AuthMiddleware(jwtSecret string) gin.HandlerFunc {
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Authorization header
    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°
    // Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ user_id Ğ¸Ğ· Ñ‚Ğ¾ĞºĞµĞ½Ğ°
    c.Set("user_id", userID)
}
```

### **2. Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**
```go
// ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ñ‡Ğ°Ñ‚Ñƒ
var chatUser models.ChatUser
if err := h.db.Where("chat_id = ? AND user_id = ?", chatID, userID).First(&chatUser).Error; err != nil {
    c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
    return
}
```

### **3. Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
```go
// ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
func (h *MessageHandler) GetMessages(c *gin.Context) {
    userID := c.GetString("user_id") // Ğ˜Ğ· JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°
    chatID := c.Param("id")
    
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ñ‡Ğ°Ñ‚Ğ°
    // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ· ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ‡Ğ°Ñ‚Ğ°
}
```

## ğŸ”’ **ĞœĞ¾Ğ¶ĞµÑ‚ Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ‡ÑƒĞ¶Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ?**

### **âŒ ĞĞ•Ğ¢! Ğ’Ğ¾Ñ‚ Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ:**

#### **1. JWT Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ:**
- **ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ** Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ JWT Ñ‚Ğ¾ĞºĞµĞ½
- **Ğ¢Ğ¾ĞºĞµĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ user_id** Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- **ĞĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ´Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ** Ğ±ĞµĞ· ÑĞµĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ»ÑÑ‡Ğ°

#### **2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ñ‡Ğ°Ñ‚Ğ°Ğ¼:**
```go
// ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¸Ğ· ÑĞ²Ğ¾Ğ¸Ñ… Ñ‡Ğ°Ñ‚Ğ¾Ğ²
var chatUser models.ChatUser
if err := h.db.Where("chat_id = ? AND user_id = ?", chatID, userID).First(&chatUser).Error; err != nil {
    c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
    return
}
```

#### **3. Ğ˜Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²Ğ½Ğµ SQL:**
```sql
-- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ñ‡Ğ°Ñ‚Ñ‹
SELECT * FROM chats 
JOIN chat_users ON chats.id = chat_users.chat_id 
WHERE chat_users.user_id = 'current-user-id'

-- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ· ÑĞ²Ğ¾Ğ¸Ñ… Ñ‡Ğ°Ñ‚Ğ¾Ğ²
SELECT * FROM messages 
WHERE chat_id IN (
    SELECT chat_id FROM chat_users 
    WHERE user_id = 'current-user-id'
)
```

## ğŸš« **Ğ§Ñ‚Ğ¾ ĞĞ• Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ:**

### **âŒ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‡ÑƒĞ¶Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ:**
- **Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ Ñ‡Ğ°Ñ‚Ñ‹** - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸
- **Ğ§ÑƒĞ¶Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ** - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¸Ğ· ÑĞ²Ğ¾Ğ¸Ñ… Ñ‡Ğ°Ñ‚Ğ¾Ğ²  
- **Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ…** - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ username ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ² Ñ‡Ğ°Ñ‚Ğ°
- **ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ…** - Ğ·Ğ°ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹

### **âŒ ĞĞ±Ğ¾Ğ¹Ñ‚Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
- **Ğ‘ĞµĞ· JWT Ñ‚Ğ¾ĞºĞµĞ½Ğ°** - Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ÑĞµÑ‚ÑÑ
- **Ğ¡ Ğ¿Ğ¾Ğ´Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¼ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ¼** - Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµÑ‚ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
- **Ğ¡ Ñ‡ÑƒĞ¶Ğ¸Ğ¼ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ¼** - Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºÑƒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

### **âŒ ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ‘Ğ”:**
- **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¸Ğ·Ğ²Ğ½Ğµ
- **Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ±ĞµĞºĞµĞ½Ğ´** Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
- **Ğ’ÑĞµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹** Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´ÑÑ‚ Ñ‡ĞµÑ€ĞµĞ· Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

## ğŸ” **ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ² ĞºĞ¾Ğ´Ğµ:**

### **ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹:**
```go
func (h *MessageHandler) GetMessages(c *gin.Context) {
    userID := c.GetString("user_id") // Ğ˜Ğ· JWT
    chatID := c.Param("id")
    
    // 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸Ğº Ñ‡Ğ°Ñ‚Ğ°
    var chatUser models.ChatUser
    if err := h.db.Where("chat_id = ? AND user_id = ?", chatID, userID).First(&chatUser).Error; err != nil {
        c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
        return
    }
    
    // 2. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸Ğ· ÑÑ‚Ğ¾Ğ³Ğ¾ Ñ‡Ğ°Ñ‚Ğ°
    var messages []models.Message
    h.db.Where("chat_id = ?", chatID).Find(&messages)
}
```

### **ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹:**
```go
func (h *MessageHandler) SendMessage(c *gin.Context) {
    userID := c.GetString("user_id") // Ğ˜Ğ· JWT
    chatID := c.Param("id")
    
    // 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‡Ğ°Ñ‚Ñƒ
    var chatUser models.ChatUser
    if err := h.db.Where("chat_id = ? AND user_id = ?", chatID, userID).First(&chatUser).Error; err != nil {
        c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
        return
    }
    
    // 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    message := models.Message{
        ChatID:  uuid.MustParse(chatID),
        UserID:  uuid.MustParse(userID), // Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
        Content: req.Content,
    }
}
```

### **WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ:**
```go
func (h *ChatHandler) HandleWebSocket(c *gin.Context) {
    token := c.Query("token")
    chatID := c.Query("chat_id")
    
    // 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ JWT Ñ‚Ğ¾ĞºĞµĞ½
    userID, err := h.validateToken(token)
    if err != nil {
        c.JSON(http.StatusUnauthorized, gin.H{"error": "Invalid token"})
        return
    }
    
    // 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ñ‡Ğ°Ñ‚Ñƒ
    var chatUser models.ChatUser
    if err := h.db.Where("chat_id = ? AND user_id = ?", chatID, userID).First(&chatUser).Error; err != nil {
        c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
        return
    }
    
    // 3. Ğ£ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ
    websocket.HandleWebSocket(h.hub, c.Writer, c.Request, userID, chatID)
}
```

## ğŸ›¡ï¸ **Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼ĞµÑ€Ñ‹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸:**

### **1. Middleware Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸:**
```go
// Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸
c.Header("X-Content-Type-Options", "nosniff")
c.Header("X-Frame-Options", "DENY")
c.Header("X-XSS-Protection", "1; mode=block")

// Rate limiting
func RateLimiting() gin.HandlerFunc {
    // ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ½Ğ° IP
}

// Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
func InputValidation() gin.HandlerFunc {
    // Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ SQL Ğ¸Ğ½ÑŠĞµĞºÑ†Ğ¸Ğ¹
}
```

### **2. Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
```go
// ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ Ñ…ĞµÑˆĞ¸Ñ€ÑƒÑÑ‚ÑÑ bcrypt
func (u *User) HashPassword(password string) error {
    hashedPassword, err := bcrypt.GenerateFromPassword([]byte(password), bcrypt.DefaultCost)
    u.Password = string(hashedPassword)
    return err
}
```

### **3. Ğ˜Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²:**
```go
// Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ°Ğ¼ Ñ‡Ğ°Ñ‚Ğ°
func (h *UploadHandler) GetFile(c *gin.Context) {
    userID := c.Param("user_id")
    fileName := c.Param("file_name")
    
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ñ„Ğ°Ğ¹Ğ» Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    if userID != currentUserID {
        c.JSON(http.StatusForbidden, gin.H{"error": "Access denied"})
        return
    }
}
```

## âœ… **Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:**

### **ğŸ”’ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹:**
- **ĞĞµÑ‚ Ğ¿Ñ€ÑĞ¼Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°** Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ** Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- **ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ²Ğ¸Ğ´ÑÑ‚** Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- **ĞĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ** Ñ‡ÑƒĞ¶Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

### **ğŸ›¡ï¸ ĞœĞ½Ğ¾Ğ³Ğ¾ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ²Ğ°Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°:**
- **JWT Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ** - ĞºÑ‚Ğ¾ Ğ²Ñ‹?
- **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°** - Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ»Ğ¸ Ğ²Ñ‹?
- **Ğ˜Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** - Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²** - Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ°Ñ‚Ğ°Ğº

### **ğŸš« Ğ§Ñ‚Ğ¾ Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾:**
- **ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿** Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Ğ§Ñ‚ĞµĞ½Ğ¸Ğµ Ñ‡ÑƒĞ¶Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** Ğ±ĞµĞ· Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- **ĞĞ±Ñ…Ğ¾Ğ´ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸** Ñ‡ĞµÑ€ĞµĞ· API
- **ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹** Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

**Ğ’Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸!** ğŸ›¡ï¸âœ¨
