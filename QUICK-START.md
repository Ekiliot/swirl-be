# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Swirl Backend

## ‚ö° **–ó–∞ 5 –º–∏–Ω—É—Ç –¥–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ API**

### **1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
go mod tidy

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
go run main.go
```

**–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞:** `http://localhost:8080`

### **2. –ü–µ—Ä–≤—ã–µ API –≤—ã–∑–æ–≤—ã**

#### **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```bash
curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username": "vasya", "password": "password123"}'
```

#### **–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É**
```bash
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "vasya", "password": "password123"}'
```

#### **–ü–æ–∏—Å–∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –≤ —á–∞—Ç—Ä—É–ª–µ—Ç–∫–µ**
```bash
curl -X GET http://localhost:8080/api/v1/chatroulette/find \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**
```bash
curl -X POST http://localhost:8080/api/v1/chats/CHAT_ID/messages \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"type": "text", "content": "Hello!"}'
```

---

## üéØ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

### **‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

#### **üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- JWT —Ç–æ–∫–µ–Ω—ã
- –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### **üí¨ –ß–∞—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

#### **‚ù§Ô∏è –õ–∞–π–∫–∏**
- –õ–∞–π–∫–Ω—É—Ç—å/—É–±—Ä–∞—Ç—å –ª–∞–π–∫
- –°—á–µ—Ç—á–∏–∫ –ª–∞–π–∫–æ–≤
- WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### **üìÅ –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ
- –†–∞–∑–Ω—ã–µ –ª–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### **üé≤ –ß–∞—Ç—Ä—É–ª–µ—Ç–∫–∞**
- –ü–æ–∏—Å–∫ —Å–ª—É—á–∞–π–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–∞—Ç–æ–≤
- –û—á–µ—Ä–µ–¥—å –ø–æ–∏—Å–∫–∞

#### **üîå WebSocket**
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- –°–æ–±—ã—Ç–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

---

## üì± **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å HTML**

### **1. –û—Ç–∫—Ä–æ–π—Ç–µ `chatroulette-app.html`**
```bash
# –í –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª
open chatroulette-app.html
```

### **2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –¥–≤—É—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- `vasya` / `password123`
- `masha` / `password123`

### **3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ Swirl**
- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ `vasya`
- –ù–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"
- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ `masha` –≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ
- –ù–∞–∂–º–∏—Ç–µ "–ù–∞–π—Ç–∏ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞"
- –û–Ω–∏ –Ω–∞–π–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞!

### **4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏**
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –õ–∞–π–∫–Ω–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–µ–¥–∏–∞ —Ñ–∞–π–ª—ã

---

## üîß **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

### **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
DATABASE_URL=postgres://username:password@localhost:5432/chatroulette?sslmode=disable
JWT_SECRET=your-super-secret-jwt-key-change-in-production
PORT=8080
```

### **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL (Ubuntu/Debian)
sudo apt-get install postgresql postgresql-contrib

# –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres createdb chatroulette
sudo -u postgres createuser --interactive
```

---

## üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

### **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- **[API-DOCUMENTATION.md](API-DOCUMENTATION.md)** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API
- **[WEBSOCKET-EVENTS.md](WEBSOCKET-EVENTS.md)** - WebSocket —Å–æ–±—ã—Ç–∏—è
- **[MEDIA-SUPPORT.md](MEDIA-SUPPORT.md)** - –†–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞ —Ñ–∞–π–ª–∞–º–∏
- **[MESSAGE-STATUS.md](MESSAGE-STATUS.md)** - –°—Ç–∞—Ç—É—Å—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- **[MESSAGE-LIKES.md](MESSAGE-LIKES.md)** - –°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **[SECURITY.md](SECURITY.md)** - –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **[ARCHITECTURE-SECURITY.md](ARCHITECTURE-SECURITY.md)** - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- **[ANTI-DUPLICATE.md](ANTI-DUPLICATE.md)** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üöÄ **–ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã**

### **JavaScript - –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä**
```javascript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
const api = new ChatrouletteAPI();

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
await api.register('vasya', 'password123');

// –ü–æ–∏—Å–∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
const match = await api.findRandomUser();
console.log('Found:', match.user.username);

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
await api.sendMessage(match.chat_id, 'Hello!');

// WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
const ws = api.connectWebSocket(match.chat_id);
ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    console.log('New message:', data);
};
```

### **Python - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**
```python
import requests

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
response = requests.post('http://localhost:8080/api/v1/auth/register', 
                        json={'username': 'vasya', 'password': 'password123'})
token = response.json()['token']

# –ü–æ–∏—Å–∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞
headers = {'Authorization': f'Bearer {token}'}
response = requests.get('http://localhost:8080/api/v1/chatroulette/find', headers=headers)
match = response.json()

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
requests.post(f'http://localhost:8080/api/v1/chats/{match["chat_id"]}/messages',
             headers=headers, json={'type': 'text', 'content': 'Hello!'})
```

---

## üéØ **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

### **1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–±–∏–ª—å–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ API endpoints
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### **2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**
- –ì—Ä—É–ø–ø–æ–≤—ã–µ —á–∞—Ç—ã
- –ö–∞–Ω–∞–ª—ã
- –ë–æ—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### **3. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
- Load balancing
- CDN –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

---

## ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**Swirl Backend –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:**
- üéØ **–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä API** –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
- üîå **WebSocket** –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- üìÅ **–ú–µ–¥–∏–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚ù§Ô∏è **–õ–∞–π–∫–∏ –∏ —Ä–µ–∞–∫—Ü–∏–∏** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- üå™Ô∏è **Swirl** –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–≤
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!** üöÄ‚ú®
